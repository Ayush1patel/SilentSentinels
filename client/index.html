<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üõ°Ô∏è Silent Sentinel - AI Emergency Detection</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
</head>

<body>
  <!-- Animated Background Particles -->
  <div class="particles-container">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>

  <!-- Floating Orbs -->
  <div class="orbs-container">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>

  <!-- Alert Box -->
  <div id="alertBox" class="hidden"></div>

  <!-- Main Dashboard Container -->
  <div class="dashboard">

    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-content">
        <div class="logo-container">
          <div class="logo-pulse"></div>
          <h1>üõ°Ô∏è Silent Sentinel</h1>
        </div>
        <p class="subtitle">AI-Powered Emergency Detection System</p>
        <div class="live-clock">
          <span id="liveClock">--:--:--</span>
          <span class="live-indicator"></span>
        </div>
      </div>
      <div class="header-controls">

        <!-- Theme Switcher -->
        <div class="theme-switcher">
          <button id="themeToggle" class="theme-btn" title="Toggle Theme">
            <span class="theme-icon">üåô</span>
          </button>
        </div>

        <!-- Feature Toggles -->
        <div class="feature-toggles">
          <div class="toggle-container">
            <label class="toggle-label">
              <input type="checkbox" id="debugMode" class="toggle-input" />
              <span class="toggle-slider"></span>
              <span class="toggle-text">Debug</span>
            </label>
          </div>

          <div class="toggle-container">
            <label class="toggle-label">
              <input type="checkbox" id="soundEffects" class="toggle-input" checked />
              <span class="toggle-slider"></span>
              <span class="toggle-text">Sound</span>
            </label>
          </div>

          <div class="toggle-container">
            <label class="toggle-label">
              <input type="checkbox" id="notifications" class="toggle-input" checked />
              <span class="toggle-slider"></span>
              <span class="toggle-text">Alerts</span>
            </label>
          </div>
        </div>

      </div>
    </header>

    <!-- Main Grid Layout -->
    <div class="dashboard-grid">

      <!-- Left Column: Detection & Log -->
      <div class="left-column">

        <!-- Current Detection Card -->
        <div class="card detection-card glow-card">
          <div class="card-glow"></div>
          <div class="card-header">
            <h2>üéØ Current Detection</h2>
            <div class="status-indicator" id="statusIndicator"></div>
          </div>
          <div class="detection-display">
            <div class="sound-wave">
              <span></span><span></span><span></span><span></span><span></span>
            </div>
            <div id="soundLabel" class="sound-label">‚Äî</div>
            <div id="confidence" class="confidence-text">Waiting for audio...</div>
            <div class="gunshot-indicator" id="gunshotIndicator">
              <span class="gunshot-icon">üéØ</span>
              <span id="gunshotProb">0%</span>
            </div>
          </div>
        </div>

        <!-- Live Audio Visualizer -->
        <div class="card visualizer-card">
          <div class="card-header">
            <h2>üìä Live Audio Spectrum</h2>
          </div>
          <div class="spectrum-visualizer" id="spectrumVisualizer">
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
            <div class="spectrum-bar"></div>
          </div>
        </div>

        <!-- Detection Log Card -->
        <div class="card log-card">
          <div class="card-header">
            <h2>üìã Detection History</h2>
            <button class="clear-log-btn" id="clearLogBtn" title="Clear Log">üóëÔ∏è</button>
          </div>
          <div id="detectionLog" class="detection-log"></div>
        </div>

      </div>

      <!-- Right Column: AI Verdict & Controls -->
      <div class="right-column">

        <!-- AI Verdict Card (Hero) -->
        <div class="card ai-verdict-card hero-glow">
          <div class="card-glow"></div>
          <div class="card-header">
            <h2>ü§ñ AI Safety Verdict</h2>
            <div class="ai-status">
              <span class="ai-dot"></span>
              <span>Claude AI</span>
            </div>
          </div>
          <div class="ai-verdict-display">
            <div class="verdict-icon-container">
              <div class="verdict-ring"></div>
              <div id="verdictIcon" class="verdict-icon">üîç</div>
            </div>
            <div id="claudeVerdict" class="verdict-text">Waiting for detection...</div>
            <div id="claudeReason" class="verdict-reason"></div>
            <div id="claudeRecommendation" class="verdict-recommendation"></div>
          </div>
        </div>

        <!-- Control Panel Card -->
        <div class="card control-card">
          <div class="card-header">
            <h2>‚öôÔ∏è Control Panel</h2>
          </div>
          <div class="control-content">
            <div id="status" class="status-text">Status: Idle</div>
            <div class="controls">
              <button id="startBtn" class="btn-primary">
                <span class="btn-icon">‚ñ∂</span>
                <span>Start Monitoring</span>
              </button>
              <button id="stopBtn" class="btn-danger" disabled>
                <span class="btn-icon">‚èπ</span>
                <span>Stop</span>
              </button>
            </div>

            <!-- Emergency Controls -->
            <div id="emergencyControls" class="emergency-controls hidden">
              <div class="emergency-header">
                <span class="pulse-dot"></span>
                ‚ö†Ô∏è Emergency Response Required
              </div>
              <button id="resumeNowBtn" class="btn-info">
                <span>‚úÖ Resume Now (False Alarm)</span>
              </button>
              <button id="resumeLaterBtn" class="btn-warning">
                <span>‚è∏Ô∏è Pause for 3 Hours (Real Emergency)</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Quick Stats Card -->
        <div class="card stats-card">
          <div class="card-header">
            <h2>üìà Session Statistics</h2>
          </div>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value" id="statDetections">0</div>
              <div class="stat-label">Detections</div>
            </div>
            <div class="stat-item critical">
              <div class="stat-value" id="statCritical">0</div>
              <div class="stat-label">Critical</div>
            </div>
            <div class="stat-item emergency">
              <div class="stat-value" id="statEmergencies">0</div>
              <div class="stat-label">Emergencies</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="statUptime">0:00</div>
              <div class="stat-label">Uptime</div>
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- Bottom Bar: Audio Visualization & Info -->
    <div class="bottom-bar">
      <div class="bottom-bar-content">
        <!-- Audio Level -->
        <div class="audio-viz-container">
          <div class="audio-viz-header">
            <span class="viz-label">üéôÔ∏è Audio Level</span>
            <span id="rmsValue" class="rms-value">0.0000</span>
          </div>
          <div class="audio-level-bar">
            <div id="audioLevelBar" class="audio-level-fill"></div>
            <div class="audio-level-markers">
              <span>0</span><span>25</span><span>50</span><span>75</span><span>100</span>
            </div>
          </div>
        </div>

        <!-- Shortcuts Hint -->
        <div class="shortcuts-hint">
          <kbd>S</kbd> Start
          <kbd>X</kbd> Stop
          <kbd>T</kbd> Theme
          <kbd>?</kbd> Help
        </div>
      </div>
    </div>

  </div>

  <script type="module" src="app.js"></script>
</body>

</html>